---
title: 42. æ¥é›¨æ°´
author: Ackerman
date: 2021-12-22 00:29:10
categories:
- [Learning, LeetCode]
tags:
- åŒæŒ‡é’ˆ
- åŠ¨æ€è§„åˆ’
---

### [42. æ¥é›¨æ°´](https://leetcode-cn.com/problems/trapping-rain-water/)

ç»™å®š `n` ä¸ªéè´Ÿæ•´æ•°è¡¨ç¤ºæ¯ä¸ªå®½åº¦ä¸º `1` çš„æŸ±å­çš„é«˜åº¦å›¾ï¼Œè®¡ç®—æŒ‰æ­¤æ’åˆ—çš„æŸ±å­ï¼Œä¸‹é›¨ä¹‹åèƒ½æ¥å¤šå°‘é›¨æ°´ã€‚

<!-- more -->

**ç¤ºä¾‹ 1ï¼š**

![img](42.trapping-rain-water/rainwatertrap.png)

```
è¾“å…¥ï¼šheight = [0,1,0,2,1,0,1,3,2,1,2,1]
è¾“å‡ºï¼š6
è§£é‡Šï¼šä¸Šé¢æ˜¯ç”±æ•°ç»„ [0,1,0,2,1,0,1,3,2,1,2,1] è¡¨ç¤ºçš„é«˜åº¦å›¾ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¯ä»¥æ¥ 6 ä¸ªå•ä½çš„é›¨æ°´ï¼ˆè“è‰²éƒ¨åˆ†è¡¨ç¤ºé›¨æ°´ï¼‰ã€‚ 
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šheight = [4,2,0,3,2,5]
è¾“å‡ºï¼š9
```

 

**æç¤ºï¼š**

- `n == height.length`
- `1 <= n <= 2 * 104`
- `0 <= height[i] <= 105`



### Tips

æ¥é›¨æ°´ç›¸å…³çš„é¢˜ç›®ï¼Œéƒ½å¯ä»¥ç”¨åŒæŒ‡é’ˆå»è§£ï¼Œå¹¶ä¸”åŒæŒ‡é’ˆä¹Ÿæ˜¯æœ€ç®€å•çš„è§£æ³•



### Reference

{% post_link 'solutions/11.container-with-most-water' 11. ç››æ°´æœ€å¤šçš„å®¹å™¨ %}



### Solutions

æ ¸å¿ƒæ€æƒ³ï¼š**å½“å‰ä½ç½®èƒ½æ¥å¤šå°‘é›¨æ°´ï¼Œè¦çœ‹ä¸¤è¾¹çš„æœ€å¤§é«˜åº¦çš„æœ€å°å€¼ï¼ˆmin(maxLeft, maxRight)ï¼‰**



{% tabs tab, 1%}

<!--tab åŒæŒ‡é’ˆ-->

1. ç§»åŠ¨è§„åˆ™ï¼šå·¦å³æŒ‡é’ˆåœ¨ä¸¤ç«¯åˆ†åˆ«å‘å†…ç§»åŠ¨ï¼Œä¸€æ¬¡åªç§»åŠ¨ä¸€ä¾§çš„æŒ‡é’ˆï¼Œè°å°å°±ç§»è°
2. **å½“å‰å·¦æŒ‡é’ˆé«˜åº¦å°äºå³æŒ‡é’ˆæ—¶ï¼Œå·¦ä¾§æœ€å¤§å€¼ä¸€å®šå°äºå³ä¾§æœ€å¤§å€¼ï¼ˆå¯ä»¥ä»”ç»†æ€è€ƒä¸‹ï¼Œæƒ³ä¸å‡ºæ¥å°±ç”¨åè¯æ³•ğŸ¥·ï¼‰**

```go
// åˆç‰ˆ
func trap(height []int) int {
    leftMax, rightMax := 0, 0
    cap := 0

    for l, r := 0, len(height)-1; l < r; {
        m, n := height[l], height[r]
        if m < n {
            if m <= leftMax {
                cap += leftMax - m
            } else {
                leftMax = m
            }
            l++
        } else {
            if n <= rightMax {
                cap += rightMax - n
            } else {
                rightMax = n
            }
            r--
        }
    }
    return cap
}

// å‚è€ƒé¢˜è§£åçš„ä»£ç ç²¾ç®€ç‰ˆ
// ç²¾ç®€æ€è·¯ï¼šå½“å‰é«˜åº¦å¯èƒ½æ˜¯æ‰€åœ¨è¾¹ï¼ˆå·¦ or å³ï¼‰çš„æœ€å¤§å€¼ï¼Œå¯ä»¥å…ˆæ›´æ–°æœ€å¤§å€¼ï¼Œåœ¨è®¡ç®—æ¥äº†å¤šå°‘æ°´
func trap(height []int) int {
    leftMax, rightMax := 0, 0
    cap := 0

    for l, r := 0, len(height)-1; l < r; {
        m, n := height[l], height[r]
        leftMax = max(m, leftMax)
        rightMax = max(rightMax, n)
        if m < n {
            cap += leftMax - m
            l++
        } else {
            cap += rightMax - n
            r--
        }
    }
    return cap
}

func max(a, b int) int {
    if a > b {
        return a
    }
    return b
}
```

<!-- endtab -->

<!--tab åŠ¨æ€è§„åˆ’-->

åˆ†åˆ«ä»å·¦ä¾§ã€å³ä¾§éå†ï¼Œæ±‚å‡ºæ¯ä¸ªåæ ‡å¤„çš„å·¦ä¾§ã€å³ä¾§æœ€å¤§å€¼

```go
func trap(height []int) int {
    n := len(height)
    maxLeft := make([]int, n)
    maxRight := make([]int, n)

    maxLeft[0] = height[0]
    for i := 1; i < n; i++ {
        maxLeft[i] = max(maxLeft[i-1], height[i])
    }
    maxRight[n-1] = height[n-1]
    for i := n - 2; i >= 0; i-- {
        maxRight[i] = max(maxRight[i+1], height[i])
    }
    ans := 0
    for i, h := range height {
        ans += min(maxLeft[i], maxRight[i]) - h
    }
    return ans
}

func max(a, b int) int {
    if a > b {
        return a
    }
    return b
}

func min(a, b int) int {
    if a > b {
        return b
    }
    return a
}
```

<!-- endtab -->

{% endtabs %}
